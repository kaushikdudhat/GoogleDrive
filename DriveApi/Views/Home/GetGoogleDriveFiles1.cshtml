@model IEnumerable<DriveApi.Models.GoogleDriveFile>
@{
    ViewBag.Title = "File Upload in folder";
}
<h2 class="imagetable">Google Drive API v3 - [Root Directory]</h2>

<style type="text/css">
    table.imagetable {
        font-family: verdana,arial,sans-serif;
        font-size: 11px;
        color: #333333;
        border-width: 1px;
        border-color: #999999;
        border-collapse: collapse;
    }

        table.imagetable th {
            background: #b5cfd2 url('cell-blue.jpg');
            border-width: 1px;
            padding: 8px;
            border-style: solid;
            border-color: #999999;
        }

        table.imagetable td {
            /*background: #dcddc0 url('cell-grey.jpg');*/
            border-width: 1px;
            padding: 8px;
            border-style: solid;
            border-color: #999999;
        }
</style>

<center>
    <div style="width:100%;">
        <table class="imagetable">
            <tr>
                <td>
                    @using (Html.BeginForm("CreateFolder", "Home", FormMethod.Post))
                    {
                        <p>
                            Folder Name :<input type="text" name="FolderName" id="txtFolderName" style="align-content:center" />
                            <input type="submit" class="CreateFolder" value="Create Folder" style="align-content:center" />
                        </p>
                    }
                </td>
                <td>
                    @using (Html.BeginForm("UploadFile", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
                    {
                        <label>File Upload in Root :</label>
                        <input type="file" name="file" id="file" style="width:176px;" />
                        <input type="submit" value="Upload" />
                    }
                </td>
            </tr>
        </table>
    </div>

    <br />

    <table class="imagetable">
        <tr id="header">
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Size)
            </th>
            <th>
                Type
            </th>
            @*<th>
                @Html.DisplayNameFor(model => model.Version)
            </th>*@
            <th>
                Created Time
            </th>
            <th>
                Upload
            </th>
        </tr>

        @if (Model.Count() > 0)
        {
            foreach (var item in Model)
            {
                if (item.Parents != null)
                {
                    if (item.Parents[0] == "0AAN1soYNhZZ9Uk9PVA")
                    {
                        <tr>
                            @{
                                string FileSize = string.Empty;
                                string Type = string.Empty;
                                if (@item.Size != null)
                                {
                                    long? KiloByte = @item.Size;
                                    FileSize = KiloByte + " bytes";
                                }
                            }
                            <td>
                                @if (@item.MimeType == "application/vnd.google-apps.folder")
                                {
                                    <a href="@Url.Action("GetContainsInFolder", "Home", new { folderId = item.Id })">@item.Name</a>
                                }
                                else
                                { @item.Name }
                            </td>
                            <td>
                                @FileSize
                            </td>
                            <td>
                                @{
                                    if (item.MimeType == "application/vnd.google-apps.folder") { Type = "Folder"; }
                                    else { Type = "File"; }
                                }
                                @Type
                            </td>
                            @*<td>
                                @Html.DisplayFor(modelItem => item.Version)
                            </td>*@
                            <td>
                                @string.Format("{0: MM/dd/yyyy}", Convert.ToDateTime(Html.DisplayFor(modelItem => item.CreatedTime).ToString()))
                            </td>

                            <td>
                                @if (FileSize == string.Empty)
                            {
                                using (Html.BeginForm("FileUploadInFolder", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                {
                                        <input type="hidden" name=Id value="@item.Id">
                                        <input type="file" name="file" id="file" style="width:176px;" />
                                        <input type="submit" value="Upload" />
                                    }

                                    using (Html.BeginForm("CreateFolderInFolder", "Home", FormMethod.Post))
                                    {
                                        <p>
                                            <input type="hidden" name=ParentId value="@item.Id">
                                            Folder Name :<input type="text" name="FolderName" id="txtFolderName" style="align-content:center" />
                                            <input type="submit" class="CreateFolder" value="Create Folder" style="align-content:center" />
                                        </p>
                                    }


                                    using (Html.BeginForm("IsClientFolderExist", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                    {
                                        <p>
                                            <input type="hidden" name=ParentId value="@item.Id">
                                           Folder Name :<input type="text" name="FolderName" id="txtFolderName" style="align-content:center" />
                                            <input type="submit" class="CreateFolder" value="check Folder" style="align-content:center" />
                                        </p>
                                    }
                                }
                            </td>
                        </tr>
                                                }
                                            }
                                        }
                                    }
                                    else
                                    {
                                        <tr> <td colspan="6">No Records found</td> </tr>
                                    }
    </table>
</center>
